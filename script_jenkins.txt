node {
   def mvnHome
   stage('Preparation') { // for display purposes
      // Get some code from a GitHub repository
      git url: 'https://github.com/Extars01/Case.git',
      credentialsId:'dc54963b-aa80-4aa5-b57d-cbcb91f209f1',
      branch:'master'
   }
   stage('Docker Build') { // for display purposes
      // Get some code from a GitHub repository
      sh "sudo docker build -t myapp ."
   }
      stage('Parando a aplicação') { // for display purposes
      // Get some code from a GitHub repository
      sh label: '', script: 'sudo docker run hello-world;sudo docker stop $(sudo docker ps -a -q); sudo docker container prune -f'
   }

   stage('Realizando o Deploy'){
     sh "sudo docker run --name meusite -p 8082:80 -d myapp"  
   }
}
